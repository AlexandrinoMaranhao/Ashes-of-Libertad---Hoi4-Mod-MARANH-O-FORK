add_namespace = CFD_intro
add_namespace = CFD_events
add_namespace = CFD_elections
add_namespace = CFD_operations
add_namespace = CFD_operation_failure
add_namespace = CFD_failometer_enabled
add_namespace = CFD_ai
add_namespace = CFD

country_event = { #Intro1
    id = CFD_intro.1
    title = CFD_intro.1.t
    desc = CFD_intro.1.d
    is_triggered_only = yes
    picture = GFX_report_cfd_fernandinho1

    option = {
        name = CFD_intro.1.a
    }
}

country_event = { #Intro2
    id = CFD_intro.2
    title = CFD_intro.2.t
    desc = CFD_intro.2.d
    is_triggered_only = yes
    picture = GFX_report_cfd_memories

    option = {
        name = CFD_intro.2.a
    }
}

country_event = { #Intro3
    id = CFD_intro.3
    title = CFD_intro.3.t
    desc = CFD_intro.3.d
    is_triggered_only = yes
    picture = GFX_report_cfd_hope

    option = {
        name = CFD_intro.3.a
    }
}

country_event = { #The Hell Battalion returns from Piaui
    id = CFD_events.1
    title = CFD_events.1.t
    desc = CFD_events.1.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_events.1.a
		CFD = {
			set_country_flag = portella_alive
			country_event = {
				id = CFD_events.2	
				days = 7
			}
		}
    }
}

country_event = { #Portella and Miguel
    id = CFD_events.2
    title = CFD_events.2.t
    desc = CFD_events.2.d
    is_triggered_only = yes
    picture = GFX_report_cfd_miguel

    option = {
        name = CFD_events.2.a
		custom_effect_tooltip = "This activates the 'Piauí Frontier'."
		CFD = {
			set_country_flag = begin_piaui_frontier
		}
    }
}

country_event = { #Guerra's Letter
    id = CFD_events.3
    title = CFD_events.3.t
    desc = CFD_events.3.d
    is_triggered_only = yes
    picture = GFX_report_cfd_elections1

    option = {
        name = CFD_events.3.a
    }
}
country_event = { #Arraes and Bezerra
    id = CFD_events.4
    title = CFD_events.4.t
    desc = CFD_events.4.d
    is_triggered_only = yes
    picture = GFX_report_cfd_elections1

    option = {
        name = CFD_events.4.a
    }
}
country_event = { #Sampaio Plans 1
    id = CFD_events.500
    title = CFD_events.5.t
    desc = CFD_events.5.d
	trigger = {
		is_ai = yes
		CFD = {
			AND = {
				has_completed_focus = CFD_foundssgbandecosess
				has_completed_focus = CFD_thecreationofssocoperbess
			}
		}
	}
	fire_only_once = yes
    picture = GFX_report_cfd_cid_plans

    option = {
        name = CFD_events.5.a
		CFD = {
			clr_country_flag = CFD_cid_adminstration
			country_event = {id = CFD_events.5}
			add_ideas = CFD_cid_sempaio_advisor
		}
    }
}
country_event = { #Sampaio Plans 2
    id = CFD_events.5
    title = CFD_events.5.t
    desc = CFD_events.5.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_report_cfd_cid_plans

    option = {
        name = CFD_events.5.a
		add_stability = 0.1
		add_popularity = {
			ideology = democratic
			popularity = 0.02
		}
		custom_effect_tooltip = "This will unite the development national spirits into a single one."
		hidden_effect = {
			add_ideas = {CFD_sudene}
			remove_ideas = {CFD_the_bandecose CFD_the_coperbe}
		}
    }
}
country_event = { #The Betrayal (Bezerra and Prestes)
    id = CFD_events.6
    title = CFD_events.6.t
    desc = CFD_events.6.d
    is_triggered_only = yes
    picture = GFX_report_cfd_bezerra_and_prestes

    option = {
        name = CFD_events.6.a
    }
}

country_event = { #Dom Helder
    id = CFD_events.7
    title = CFD_events.7.t
    desc = CFD_events.7.d
    is_triggered_only = yes
    picture = GFX_report_cfd_helder

    option = {
        name = CFD_events.7.a
    }
}

country_event = { #Doria FDP!
    id = CFD_events.8
    title = CFD_events.8.t
    desc = CFD_events.8.d
    is_triggered_only = yes
    picture = GFX_report_cfd_memories

    option = {
        name = CFD_events.8.a
		CFD = {
			set_country_flag = CFD_sergipe_backstab_enabled
			mark_focus_tree_layout_dirty = yes
			complete_national_focus = CFD_the_sergipe_backstab
			add_ideas = CFD_the_sergipe_backstab 
		}
    }
}

country_event = { #Doria's run
    id = CFD_events.9
    title = CFD_events.9.t
    desc = CFD_events.9.d
    is_triggered_only = yes
    picture = GFX_report_cfd_memories

    option = {
        name = CFD_events.9.a
		CFD = {
			custom_effect_tooltip = "Dória will escape to São Paulo..."
			hidden_effect = {
				add_political_power = -100
				add_popularity = {
					ideology = reactionary
					popularity = 0.1
				}
			}
		}
    }
	
    option = {
        name = CFD_events.9.b
		CFD = {
			custom_effect_tooltip = "Dória will be brought to justice, at a cost..."
			hidden_effect = {
				add_political_power = 100
				add_popularity = {
					ideology = reactionary
					popularity = -0.1
				}
			}
		}
    }
}


country_event = { #Doria choice
    id = CFD_events.10
    title = CFD_events.10.t
    desc = CFD_events.10.d
    is_triggered_only = yes
    picture = GFX_report_cfd_memories

    option = {
        name = CFD_events.10.a
		CFD = {

		}
    }
}

country_event = { #Bezerra's remorse
    id = CFD_events.11
    title = CFD_events.11.t
	desc = {
		text = CFD_events.11.d.normal
		trigger = {
			CFD = {
				NOT = {
					has_government = communism
				}
			}
		}
	}
	desc = {
		text = CFD_events.11.d.bezerra
		trigger = {
			CFD = {
				has_government = communism
			}
		}
	}
    is_triggered_only = yes
    picture = GFX_report_cfd_bezerra_remorse

    option = {
		trigger = {
			CFD = {
				has_government = communism
			}
		}
        name = CFD_events.11.a.bezerra
    }
    option = {
		trigger = {
			CFD = {
				NOT = {
					has_government = communism
				}
			}
		}
        name = CFD_events.11.a.normal
    }
}

##The Elections events##

country_event = { #Eleições Start
    id = CFD_elections.1
    title = CFD_elections.1.t
    desc = CFD_elections.1.d
    is_triggered_only = yes
    picture = GFX_report_cfd_family_stuff

    option = {
        name = CFD_elections.1.a
		CFD = {
			set_country_flag = CFD_elections_phase_1
			mark_focus_tree_layout_dirty = yes
			complete_national_focus = CFD_the_elections
			hidden_effect = {
				country_event = {
					id = CFD_elections.2
					days = 7
				}
			}
		}	
    }
}

country_event = { #Election options 1
    id = CFD_elections.2
    title = CFD_elections.2.t
    desc = CFD_elections.2.d
    is_triggered_only = yes
    picture = GFX_report_cfd_elections1

    option = {
        name = CFD_elections.2.a
		CFD = {
			custom_effect_tooltip = "This will increase the likelihood of the election happening..."
			add_to_variable = {
				var = CFD_yes_elections_chances
				value = 2
			}
			hidden_effect = {
				country_event = {
					id = CFD_elections.3
					days = 7
				}
			}
		}
    }
    option = {
        name = CFD_elections.2.b
		CFD = {
			custom_effect_tooltip = "Arraes will attempt to persuade the electoral system to prevent the election from taking place..."
			add_to_variable = {
				var = CFD_no_elections_chances
				value = 2
			}
			hidden_effect = {
				country_event = {
					id = CFD_elections.3
					days = 7
				}
			}
		}
    }
}

country_event = { #Election options 2
    id = CFD_elections.3
    title = CFD_elections.3.t
    desc = CFD_elections.3.d
    is_triggered_only = yes
    picture = GFX_report_cfd_elections1

    option = {
        name = CFD_elections.3.a
		CFD = {
			custom_effect_tooltip = "This will increase the likelihood of the election happening..."
			add_to_variable = {
				var = CFD_yes_elections_chances
				value = 1
			}
			hidden_effect = {country_event = {id = CFD_elections.4}}
		}
    }
    option = {
        name = CFD_elections.3.b
		CFD = {
			custom_effect_tooltip = "Arraes will attempt to persuade the electoral system to prevent the election from taking place..."
			add_to_variable = {
				var = CFD_no_elections_chances
				value = 1
			}
			hidden_effect = {country_event = {id = CFD_elections.4}}
		}
    }
}

country_event = { #Election yes or no
    id = CFD_elections.4
    title = CFD_elections.3.t
    desc = CFD_elections.3.d
    is_triggered_only = yes
	hidden = yes
    picture = GFX_report_cfd_elections1

    option = { #Arraes coup
        name = CFD_elections.3.a
		trigger = {
			CFD = {
				check_variable = { CFD_no_elections_chances > CFD_yes_elections_chances }
			}
		}
		CFD = {hidden_effect = {complete_national_focus = CFD_nooneotherthanme}}
    }
	
    option = { #Elections is a go!
        name = CFD_elections.3.b
		trigger = {
			CFD = {
				check_variable = { CFD_yes_elections_chances > CFD_no_elections_chances }
			}
		}
		CFD = {hidden_effect = {complete_national_focus = CFD_continuetheelections}}
    }
}

country_event = {
    id = CFD_operations.1
    title = CFD_operations.1.t
    desc = CFD_operations.1.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.1.a
		PIA = {
			set_province_controller = 1929
			set_province_controller = 1771
			set_province_controller = 4133
			set_province_controller = 1634
			set_province_controller = 1895
			set_province_controller = 941
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 330
			}
		}
    }
}

country_event = {
    id = CFD_operations.2
    title = CFD_operations.2.t
    desc = CFD_operations.2.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.2.a
		PIA = {
			set_province_controller = 1929
			set_province_controller = 1771
			set_province_controller = 4133
			set_province_controller = 1634
			set_province_controller = 1895
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 941
				set_province_controller = 330
			}
		}
    }
}

country_event = {
    id = CFD_operations.3
    title = CFD_operations.3.t
    desc = CFD_operations.3.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.3.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 1384
			}
		}
    }
}

country_event = {
    id = CFD_operations.4
    title = CFD_operations.4.t
    desc = CFD_operations.4.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.4.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 2103
			}
		}
    }
}

country_event = {
    id = CFD_operations.5
    title = CFD_operations.5.t
    desc = CFD_operations.5.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.5.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 3973
			}
		}
    }
}

country_event = {
    id = CFD_operations.6
    title = CFD_operations.6.t
    desc = CFD_operations.6.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.6.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 1236
			}
		}
    }
}

country_event = {
    id = CFD_operations.7
    title = CFD_operations.7.t
    desc = CFD_operations.7.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.7.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 4003
			}
		}
    }
}

country_event = {
    id = CFD_operations.8
    title = CFD_operations.8.t
    desc = CFD_operations.8.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.8.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 3951
			}
		}
    }
}

country_event = {
    id = CFD_operations.9
    title = CFD_operations.9.t
    desc = CFD_operations.9.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.9.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 1844
				set_country_flag = operations_completed
			}
		}
    }
}

country_event = {
    id = CFD_operations.10
    title = CFD_operations.10.t
    desc = CFD_operations.10.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.10.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 3903
			}
		}
    }
}

country_event = {
    id = CFD_operations.11
    title = CFD_operations.11.t
    desc = CFD_operations.11.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations.11.a
		PIA = {
			CFD = {
				add_to_variable = {
					var = cfd_piaui_frontier_progress
					value = 0.11
				}
				set_province_controller = 52
			}
		}
    }
}

country_event = {
    id = CFD_operation_failure.1
    title = CFD_operation_failure.1.t
    desc = CFD_operation_failure.1.d
    is_triggered_only = yes
    picture = GFX_report_event_guerrilla

    option = {
        name = CFD_operations_failure.1.a
		CFD = {
			set_country_flag = portella_dead
			clear_variable = cfd_piaui_frontier_progress
			clr_country_flag = begin_piaui_frontier
		}
    }
}

country_event = { #Failstate stuff
    id = CFD_failometer_enabled.1
    title = CFD_failometer_enabled.1.t
    desc = CFD_failometer_enabled.1.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
		trigger = {
			has_game_rule = { rule = Failostates_effect option = FAIL_O_STATE_ENABLED }
		}
        name = CFD_failometer_enabled.1.a
		
        NUD = {
			
			add_opinion_modifier = { target = INT modifier = large_increase }
			
			load_oob = "NUD_1967"
			transfer_state = 503
			
			declare_war_on = {
                target = CFD
                type = annex_everything
            }
           
        }
		CFD = {
			create_wargoal = {
				type = annex_everything
				target = NUD
			}
		}
		INT = {
			transfer_state = 6
			transfer_state = 4
			transfer_state = 3
			transfer_state = 5
			load_oob = "INT_1967"
			load_oob = "INT_revolutionary_divisions"
			create_wargoal = {
				type = annex_everything
				target = NUD
			}
			declare_war_on = {
				target = MNH
				type = annex_everything
			}
			declare_war_on = {
                target = CFD 
                type = annex_everything
            }
		}
    }
}

################################################	OLD AI EVENTS.		################################################
country_event = {
    id = CFD_ai.1
    title = CFD_ai.1.t
    desc = CFD_ai.1.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
        name = CFD_ai.1.a
        annex_country = {
            target = SEG
            transfer_troops = yes
        }
        add_state_core = 11
    }
}


country_event = {
    id = CFD.1 # PEB breaks away from CFD
    title = CFD.1.t
    desc = CFD.1.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
        name = CFD.1.a
        delete_unit_template_and_units = {
            division_template = "Infantaria Nordeste"
            disband = yes
        }
        release = PEB
        CFD = {
            set_politics = {
                ruling_party = communism
                last_election = "1967.1.1"
                election_frequency = 48
                elections_allowed = no
            }
            set_popularities = {
                democratic = 0
                fascism = 0
                communism = 100
                neutrality = 0
                reactionary = 0
            }
        }
        PEB = { load_oob = "PEB_1967" country_event = { id = PEB.1 days = 7 } }
        MNH = { country_event = { id = MNH.1 hours = 3 } }
        CFD = { remove_ideas = cangaceiros_and_commies }
        country_event = { id = CFD.2 days = 14 }
    }
}

country_event = {
    id = CFD.2 # CEA breaks away from CFD
    title = CFD.2.t
    desc = CFD.2.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
		trigger = {
			has_game_rule = { rule = Failostates_effect option = FAIL_O_STATE_ENABLED }
		}
        name = CFD.2.a
        CEA = {
            transfer_state  = 14
            transfer_state  = 12
            load_oob = "CEA_1967"
            declare_war_on = {
                target = CFD 
                type = annex_everything
            }

            declare_war_on = {
                target = PEB 
                type = annex_everything
            }
            declare_war_on = {
              target = INT
              type = annex_everything
            }
            declare_war_on = {
              target = NUD
              type = annex_everything
            }
            random_country_with_original_tag = {
                original_tag_to_check = PEB
                limit = {
                    has_government = communism
                }
                declare_war_on = {
                    target = PREV 
                    type = annex_everything
                }
            }
        }
        country_event = { id = CFD.3 days = 3 }
    }
}

country_event = {
    id = CFD.3 # RGN breaks away from CFD
    title = CFD.3.t
    desc = CFD.3.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
        name = CFD.3.a

        CFD = { remove_ideas = gateway_of_south_america }

        RGN = {
            transfer_state  = 3
            transfer_state  = 4
            transfer_state  = 5
            load_oob = "RGN_1967"
            declare_war_on = {
                target = CFD
                type = annex_everything
            }
            declare_war_on = {
              target = INT
              type = annex_everything
            }
            declare_war_on = {
                target = PEB 
                type = annex_everything
            }

            declare_war_on = {
                target = CEA
                type = annex_everything
            }

            random_country_with_original_tag = {
                original_tag_to_check = PEB
                limit = {
                    has_government = communism
                }
                declare_war_on = {
                    target = PREV 
                    type = annex_everything
                }
            }
        }
        country_event = { id = CFD.4 days = 3 }
    }
}

country_event = {
    id = CFD.5 # ALA breaks away from CFD
    title = CFD.5.t
    desc = CFD.5.d
    fire_only_once = yes
    is_triggered_only = yes
    picture = x

    option = {
		trigger = {
			has_game_rule = { rule = Failostates_effect option = FAIL_O_STATE_ENABLED }
		}
        name = CFD.5.a
		every_country = {
        news_event = {
            id = world.79
            days = 1
        }
    }
        ALA = {
			country_event = { id = CFD_failometer_enabled.1 days = 2 }
            transfer_state  = 10
            load_oob = "ALA_1967"
            declare_war_on = {
                target = CFD
                type = annex_everything
            }
            declare_war_on = {
              target = INT
              type = annex_everything
            }
            declare_war_on = {
                target = PEB 
                type = annex_everything
            }

            declare_war_on = {
                target = CEA
                type = annex_everything
            }

            declare_war_on = {
                target = RGN
                type = annex_everything
            }

            declare_war_on = {
                target = PAI
                type = annex_everything
            }
            
            random_country_with_original_tag = {
                original_tag_to_check = PEB
                limit = {
                    has_government = communism
                }
                declare_war_on = {
                    target = PREV 
                    type = annex_everything
                }
            }
        }
    }
}