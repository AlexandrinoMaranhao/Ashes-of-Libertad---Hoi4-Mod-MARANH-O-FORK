add_namespace = MEX
add_namespace = MEX_scripted #for scripted wars
add_namespace = MEX_fake

## Scripted ## #1220 days until USA invasion
country_event = { # Zapatist unrest
    id = MEX_scripted.1
    title = MEX_scripted.1.t
    desc = MEX_scripted.1.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.1.a
        hidden_effect = {
            256 = {
                set_demilitarized_zone = yes
            }
            259 = {
                set_demilitarized_zone = yes
            }
            country_event = { id = MEX_scripted.2 days = 7 }
        }
    }
}

country_event = { # Maoists border clash
    id = MEX_scripted.2
    title = MEX_scripted.2.t
    desc = MEX_scripted.2.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.2.a
        hidden_effect = {
            EJR = {
                transfer_state = 253
		        transfer_state = 250
		        transfer_state = 251
		        transfer_state = 557
                transfer_state = 252
                add_state_core = 252
                add_state_core = 253
                start_border_war = {
                    change_state_after_war = no
                    attacker = {
                        state = 251
                        num_provinces = 1
                        on_win = MEX_fake.1
                        on_lose = MEX_fake.1
                        on_cancel = MEX_fake.1
                    }
                                
                    defender = {
                        state = 254
                        num_provinces = 1
                        on_win = MEX_fake.1
                        on_lose = MEX_fake.1
                        on_cancel = MEX_fake.1
                    }
                }
            }
            country_event = { id = MEX_scripted.3 days = 10 }
        }
    }
}

country_event = { # hidden event in order not to fuck up the border war
    id = MEX_fake.1
    title = MEX_fake.1.t
    desc = MEX_fake.1.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    hidden = yes
    
    option = {
        name = MEX_fake.1.a
    }
}

country_event = { # Tabasco rebells
    id = MEX_scripted.3
    title = MEX_scripted.3.t
    desc = MEX_scripted.3.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.3.a
        hidden_effect = {
            TAB = {
                transfer_state = 254
		        transfer_state = 556
                add_state_core = 254
		        add_state_core = 556
                load_oob = "TAB_1967"
            }
            cancel_border_war = {
                dont_fire_events = yes
                defender = 254
                attacker = 251
            }
            AMG = {
                transfer_state = 268
                transfer_state = 561
                transfer_state = 257
                transfer_state = 249
                add_state_core = 268
                add_state_core = 561
                add_state_core = 257
                add_state_core = 249
                load_oob = "AMG_1967"
                declare_war_on = {
                    target = TAB
                    type = annex_everything
                }
            }
            puppet = AMG
            country_event = { id = MEX_scripted.4 days = 3 }
        }
    }
}

country_event = { # Zapatists rebell
    id = MEX_scripted.4
    title = MEX_scripted.4.t
    desc = MEX_scripted.4.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.4.a
        hidden_effect = {
            256 = {
                set_demilitarized_zone = yes
            }
            259 = {
                set_demilitarized_zone = yes
            }
            ZAP = {
                transfer_state = 259
                transfer_state = 256
                add_state_core = 259
		        add_state_core = 256
                load_oob = "ZAP_1967"
            }
            AMP = {
                transfer_state = 262
                transfer_state = 261
                add_state_core = 262
                add_state_core = 261
                load_oob = "AMP_1967"
                declare_war_on = {
                    target = ZAP
                    type = annex_everything
                }
            }
            puppet = AMP
            AMG = {
                declare_war_on = {
                    target = ZAP
                    type = annex_everything
                }
            }
            country_event = { id = MEX_scripted.5 days = 30 }
        }
    }
}

country_event = { # American Invasion
    id = MEX_scripted.5
    title = MEX_scripted.5.t
    desc = MEX_scripted.5.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.5.a
        hidden_effect = {
            481 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            258 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            560 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            562 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            563 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            561 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            257 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            258 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            483 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            263 = {
                set_state_flag = MEX_outskirt_of_capital
            }
            AMG = {
                load_oob = "AMG_American_Invasion"
            }
            USA = {
                transfer_state = 248
                declare_war_on = {
                    target = MEX
                    type = annex_everything
                }
                load_oob = "USA_DEMO"
            }
            every_country = {
                news_event = {
                    id = world.2
                    days = 1
                }
            }
            country_event = { id = MEX_scripted.6 days = 5 }
        }
    }
}

country_event = { # Mexico is forced to sigh a truce with the civil war factions
    id = MEX_scripted.6
    title = MEX_scripted.6.t
    desc = MEX_scripted.6.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.6.a
        hidden_effect = {
            AMP = {
                white_peace = ZAP
            }
            AMG = {
                white_peace = ZAP
            }
        }
    }
}

country_event = { # Cristeros secede
    id = MEX_scripted.7
    title = MEX_scripted.7.t
    desc = MEX_scripted.7.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.7.a
        hidden_effect = {
            NGA = {
                transfer_state = 267
                transfer_state = 266
                transfer_state = 264
                transfer_state = 273
                transfer_state = 558
                add_state_core = 267
                add_state_core = 266
                add_state_core = 264
                add_state_core = 273
                add_state_core = 558
                load_oob = "NGA_1967"
            }
            country_event = { id = MEX_scripted.9 days = 10 }
        }
    }
}

country_event = { # Hidalgo secede
    id = MEX_scripted.8
    title = MEX_scripted.8.t
    desc = MEX_scripted.8.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.8.a
        hidden_effect = {
            ESH = {
                transfer_state = 258
                add_state_core = 258
            }
        }
    }
}

country_event = { # Erendira uprises
    id = MEX_scripted.9
    title = MEX_scripted.9.t
    desc = MEX_scripted.9.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.9.a
        hidden_effect = {
            ERE = {
                transfer_state = 263
                add_state_core = 263
                load_oob = "ERE_1967"
            }
            country_event = { id = MEX_scripted.10 days = 20 }
        }
    }
}

country_event = { # Los Halcones Uprises
    id = MEX_scripted.10
    title = MEX_scripted.10.t
    desc = MEX_scripted.10.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.10.a
        hidden_effect = {
            HAL = {
                transfer_state = 483
                add_state_core = 483
            }
            country_event = { id = MEX_scripted.11 days = 10 }
        }
    }
}

country_event = {
    id = MEX_scripted.11
    title = MEX_scripted.11.t
    desc = MEX_scripted.11.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.11.a
        hidden_effect = {
            ESC = {
                transfer_state = 265
                add_state_core = 265
            }
            country_event = { id = MEX_scripted.12 days = 60 }
        }
    }
}

country_event = { # The Perfect Dictatorship is no more
    id = MEX_scripted.12
    title = MEX_scripted.12.t
    desc = MEX_scripted.12.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.12.a
        hidden_effect = {
            remove_ideas = MEX_mexican_civil_war
            set_cosmetic_tag = MEX_collapsed
            delete_unit_template_and_units = {
                division_template = "División del Ejército"
                disband = yes
            }
            delete_unit_template_and_units = {
                division_template = "Brigada de Combate"
                disband = yes
            }
            delete_unit_template_and_units = {
                division_template = "Charros"
                disband = yes
            }
            end_puppet = AMP
            end_puppet = AMG
            kill_country_leader = yes
            set_politics = {
                ruling_party = communism
                elections_allowed = no
                last_election = "1936.1.1"
                election_frequency = 48
            }
            set_popularities = {
                democratic = 0
                neutrality = 0
                fascism = 0
                communism = 100
                reactionary = 0
            }
            create_country_leader = {
                name = "Collasped Government"
                #picture = "Portrait_HAL_Manuel_Díaz_Escobar.dds"
                expire = "1999.1.1"
                ideology = anarchism
                #traits = { }
            }
            AMP = {
                declare_war_on = {
                    target = MEX
                    type = annex_everything
                }
            }
            AMG = {
                declare_war_on = {
                    target = MEX
                    type = annex_everything
                }
            }
            country_event = { id = MEX_scripted.8 days = 5 }
        }
    }
}

country_event = { # End of the American-Mexican War
    id = MEX_scripted.13
    title = MEX_scripted.13.t
    desc = MEX_scripted.13.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    mean_time_to_happen = { days = 1 }
    trigger = {
        original_tag = MEX
        any_state = {
            is_controlled_by = USA
            has_state_flag = MEX_outskirt_of_capital
        }
    }
    
    option = {
        name = MEX_scripted.13.a
        hidden_effect = {
            USA = {
                white_peace = MEX
                white_peace = AMP
                white_peace = AMG
                transfer_state = 479
                transfer_state = 480
                transfer_state = 274
		        transfer_state = 275
                transfer_state = 482
		        transfer_state = 270
		        transfer_state = 492
                transfer_state = 271
		        transfer_state = 484
		        transfer_state = 493
		        transfer_state = 272
                transfer_state = 494
		        transfer_state = 276
		        transfer_state = 495
		        transfer_state = 277
                transfer_state = 269
                country_event = { id = MEX_scripted.16 days = 300 }#begin USA collapse
            }
            481 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            258 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            560 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            562 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            563 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            561 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            257 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            258 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            483 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            263 = {
                clr_state_flag = MEX_outskirt_of_capital
            }
            country_event = { id = MEX_scripted.7 days = 30 }
        }
    }
}

country_event = { # Retreats North
    id = MEX_scripted.14
    title = MEX_scripted.14.t
    desc = MEX_scripted.14.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.14.a
        hidden_effect = {
            479 = {
                set_demilitarized_zone = yes
            }
            274 = {
                set_demilitarized_zone = yes
            }
            269 = {
                set_demilitarized_zone = yes
            }
            275 = {
                set_demilitarized_zone = yes
            }
            country_event = { id = MEX_scripted.15 days = 30 }
        }
    }
}

country_event = { # New New Mexico
    id = MEX_scripted.15
    title = MEX_scripted.15.t
    desc = MEX_scripted.15.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.15.a
        hidden_effect = {
            274 = {
                set_demilitarized_zone = no
            }
            275 = {
                set_demilitarized_zone = no
            }
            NNM = {
                transfer_state = 274
                transfer_state = 275
                add_state_core = 274
                add_state_core = 275
            }
            country_event = { id = MEX_scripted.16 days = 30 }
        }
    }
}

country_event = { # Mormons and Bandits
    id = MEX_scripted.16
    title = MEX_scripted.16.t
    desc = MEX_scripted.16.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.16.a
        hidden_effect = {
            479 = {
                set_demilitarized_zone = no
            }
            269 = {
                set_demilitarized_zone = no
            }
            480 = {
                set_demilitarized_zone = yes
            }
            272 = {
                set_demilitarized_zone = yes
            }
            271 = {
                set_demilitarized_zone = yes
            }
            484 = {
                set_demilitarized_zone = yes
            }
            493 = {
                set_demilitarized_zone = yes
            }
            LEB = {
                transfer_state = 479
                add_state_core = 479
            }
            PHF = {
                transfer_state = 269
                add_state_core = 269
            }
            country_event = { id = MEX_scripted.17 days = 30 }
        }
    }
}

country_event = { # Riches
    id = MEX_scripted.17
    title = MEX_scripted.17.t
    desc = MEX_scripted.17.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.17.a
        hidden_effect = {
            480 = {
                set_demilitarized_zone = no
            }
            272 = {
                set_demilitarized_zone = no
            }
            271 = {
                set_demilitarized_zone = no
            }
            484 = {
                set_demilitarized_zone = no
            }
            493 = {
                set_demilitarized_zone = no
            }
            NAM = {
                transfer_state = 480
                add_state_core = 480
            }
            MTR = {
                transfer_state = 271
                transfer_state = 484
                transfer_state = 493
                transfer_state = 272
                add_state_core = 271
                add_state_core = 484
                add_state_core = 493
                add_state_core = 272
            }
            country_event = { id = MEX_scripted.18 days = 5 }
        }
    }
}

country_event = { # Riches
    id = MEX_scripted.18
    title = MEX_scripted.18.t
    desc = MEX_scripted.18.d
    #picture = x
    fire_only_once = yes
    is_triggered_only = yes
    
    option = {
        name = MEX_scripted.18.a
        hidden_effect = {
            USW = {
                transfer_state = 494
                transfer_state = 276
                transfer_state = 495
                transfer_state = 277
                add_state_core = 494
                add_state_core = 276
                add_state_core = 495
                add_state_core = 277
            }
            USA = {
                add_state_core = 482
                add_state_core = 270
                add_state_core = 492
                set_cosmetic_tag = USA_EMC
            }
        }
    }
}
